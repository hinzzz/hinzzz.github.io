---
title: Spring Cloud Ribbon 入门教程
author: hinzzz
categories: ribbon 
date: 2020/11/30
keywords: [Spring Cloud Ribbon 入门教程t]
description: 本文主要介绍Spring Cloud Ribbon 入门教程
---



#### Spring Cloud Ribbon

> Spring Cloud Ribbon是基于NetFlix Ribbon实现的一套**客户端负载均衡的工具**
>
> 主要功能是提供客户端的软件负载均衡算法和服务调用，Ribbon客户端组件提供一系列的完善配置项如：连接超时，重试等。就是在配置文件中列出LoadBalance(简称LB)后面所有的机器，Ribbon会自动的帮助你基于某种规则去链接这些机器。我们很容器使用Ribbon实现自定义的负载均衡算法





#### 一、能干嘛？

##### 1、LB（负载均衡）

> 将用户的请求平摊的分配到多个服务上，从而达到系统的HA（高可用）
>
> 常见的负载均衡软件有nginx, LVS, F5等

##### 2、Ribbon本地负载均衡客户端和Nginx服务端负载均衡区别

nginx是服务器负载均衡，客户端所有的请求都会交给nginx, 然后由nginx实现请求的分发。

Ribbon本地负载均衡，在调用微服务接口的时候，会在注册中心上获取注册信息和服务列表之后缓存到JVM本地，从而在本地实现RPC远程服务调用。

nginx对外，Ribbon对内 ，nginx性能更好，Ribbon可以剔除不健康节点，nginx剔除比较复杂

> 假如一个程序你分别部署了至少两个实例，这个时候可以在nginx配置一下负载均衡策略，这里的策略会有多种可选，一个请求进来先到nginx，这时候根据之前配置的策略，会把请求转到多个实例中的其中一个，假如程序中使用了springCloud作了分布式部署，在请求的相应方法中会调用其他服务实例，调用的方式是ribbon，那么当被调用的服务是至少两个以上，这个时候ribbon会根据默认的均衡策略选择其中的一个调用，这就是整个流程。总的来说，都是负载均衡，只不过起作用的位置不一样而已。

##### 3、集中式LB

即在服务的消费方和服务提供方之间使用独立的LB设施（可以说是硬件：F5，也可以是软件：nginx）由该设施负责把访问请求通过某种策略转发至服务的提供方

##### 4、进程内LB

将LB逻辑集成到消费方，消费方从服务中心获知那些地址可用，然后自己再从这些地址选择出一个合适的服务器，Ribbon就属于进程内LB，它只是一个类库，集成于消费方进程，消费方通过它来获取服务提供方的地址。

